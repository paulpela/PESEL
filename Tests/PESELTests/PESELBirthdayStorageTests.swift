//
//  File.swift
//  
//
//  Created by Pawe≈Ç Pela on 17/06/2021.
//

import XCTest
@testable import PESEL

final class PESELBirthdayStorageTests: XCTestCase {
    func testStoresCorrectYear() {
        let testNumbers = [
            1975: "75011611349",
            1972: "72100831167",
            1956: "56120342564",
            1995: "95021583122",
            1985: "85111651978",
            1973: "73062413484",
            1977: "77092829468",
            1976: "76120133443",
            1966: "66110141567",
            1967: "67072466161",
            2078: "78252628424",
            2091: "91213116541",
            2098: "98221017288",
            2072: "72212393164",
            2093: "93232344358",
            2090: "90291868519",
            2077: "77301716718",
            2087: "87222062311",
            2011: "11311382910",
            1811: "11911909135",
            1813: "13821207303",
            1894: "94882511039",
            2111: "11462809113",
            2133: "33410203220",
            2179: "79431017505",
            2278: "78680201758",
            2210: "10710602616",
            2219: "19620115243",
            

        ]
        
        for (year, pesel) in testNumbers {
            XCTAssertEqual(try PESEL(pesel)!.year, year)
        }
    }
    
    func testStoresCorrectMonth() {
        let testNumbers: [String:PESEL.Month] = [
            "75011611349": .january,
            "72100831167": .october,
            "56120342564": .december,
            "01280355941": .august,
            "03260412242": .june,
            "01312691159": .november,
            "02321938974": .december,
            "01252089245": .may,
            "04321652618": .december,
            "66110141567": .november,
            "67072466161": .july,
            "78252628424": .may,
            "91213116541": .january,
            "98221017288": .february,
            "72212393164": .january,
            "93232344358": .march,
            "90291868519": .september,
            "77301716718": .october,
            "87222062311": .february,
            "11311382910": .november,
            "11911909135": .november,
            "13821207303": .february,
            "94882511039": .august,
            "11462809113": .june,
            "33410203220": .january,
            "79431017505": .march,
            "78680201758": .august,
        ]
        
        for (pesel, month) in testNumbers {
            XCTAssertEqual(try PESEL(pesel)!.month, month, "Failed for \(pesel)")
        }
    }
    
    func testStoresCorrectDay() {
        let testNumbers: [String:Int] = [
            "75011611349": 16,
            "72100831167": 8,
            "56120342564": 3,
            "01280355941": 3,
            "03260412242": 4,
            "01312691159": 26,
            "02321938974": 19,
            "01252089245": 20,
            "04321652618": 16,
            "66110141567": 1,
            "67072466161": 24,
            "78252628424": 26,
            "91213116541": 31,
            "98221017288": 10,
            "72212393164": 23,
            "93232344358": 23,
            "90291868519": 18,
            "77301716718": 17,
            "87222062311": 20,
            "11311382910": 13,
            "11911909135": 19,
            "13821207303": 12,
            "94882511039": 25,
            "11462809113": 28,
            "33410203220": 2,
            "79431017505": 10,
            "78680201758": 2,
        ]
        
        for (pesel, day) in testNumbers {
            XCTAssertEqual(try PESEL(pesel)!.day, day, "Failed for \(pesel)")
        }
    }
}
